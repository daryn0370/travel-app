import React, { useState } from "react";
import "./ChatBot.css";

const ChatBot = () => {
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const [open, setOpen] = useState(false);

  const responses = {
    Ð±Ð¸Ð»ÐµÑ‚: "Ð§Ñ‚Ð¾Ð±Ñ‹ ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚, Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐÐ²Ð¸Ð°-Ð‘Ð¸Ð»ÐµÑ‚Ñ‹' Ð¸ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð½ÑƒÐ¶Ð½Ð¾Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ.",
    Ð±Ð¸Ð»ÐµÑ‚Ñ‹: "Ð§Ñ‚Ð¾Ð±Ñ‹ ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚, Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐÐ²Ð¸Ð°-Ð‘Ð¸Ð»ÐµÑ‚Ñ‹' Ð¸ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð½ÑƒÐ¶Ð½Ð¾Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ.",
    Ð°Ð²Ð¸Ð°: "Ð”Ð»Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸ Ð°Ð²Ð¸Ð°-Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð², Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐÐ²Ð¸Ð°-Ð‘Ð¸Ð»ÐµÑ‚Ñ‹'.",
    Ð¿Ð¾Ð»ÐµÑ‚: "Ð”Ð»Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸ Ð°Ð²Ð¸Ð°Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð² Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐÐ²Ð¸Ð°-Ð‘Ð¸Ð»ÐµÑ‚Ñ‹'.",
    Ð°Ñ€ÐµÐ½Ð´Ð°: "Ð”Ð»Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹ Ð¾Ñ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ 'ÐÑ€ÐµÐ½Ð´Ð° Ð°Ð²Ñ‚Ð¾', Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°Ð²Ñ‚Ð¾ Ð¸ Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚Ðµ Ð·Ð°ÑÐ²ÐºÑƒ.",
    Ð°Ð²Ñ‚Ð¾: "Ð”Ð»Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐÑ€ÐµÐ½Ð´Ð° Ð°Ð²Ñ‚Ð¾'.",
    Ð¼Ð°ÑˆÐ¸Ð½Ñƒ: "Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð°Ñ€ÐµÐ½Ð´Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ 'ÐÑ€ÐµÐ½Ð´Ð° Ð°Ð²Ñ‚Ð¾'.",
    Ð¼Ð°ÑˆÐ¸Ð½Ñ‹: "Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð°Ñ€ÐµÐ½Ð´Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ 'ÐÑ€ÐµÐ½Ð´Ð° Ð°Ð²Ñ‚Ð¾'.",
    Ð°Ñ€ÐµÐ½Ð´Ð°_Ð¼Ð°ÑˆÐ¸Ð½Ñ‹: "ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐÑ€ÐµÐ½Ð´Ð° Ð°Ð²Ñ‚Ð¾', Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð°Ñ€ÐµÐ½Ð´Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ.",
    Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ñ‹: "Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ñƒ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ 'ÐžÑ‚ÐµÐ»Ð¸', Ð²Ñ‹Ð±Ñ€Ð°Ð² Ð´Ð°Ñ‚Ñ‹ Ð¸ Ð³Ð¾Ñ€Ð¾Ð´.",
    Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ñƒ: "Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ñƒ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ 'ÐžÑ‚ÐµÐ»Ð¸', Ð²Ñ‹Ð±Ñ€Ð°Ð² Ð´Ð°Ñ‚Ñ‹ Ð¸ Ð³Ð¾Ñ€Ð¾Ð´.",
    Ð¾Ñ‚ÐµÐ»ÑŒ: "Ð”Ð»Ñ Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¾Ñ‚ÐµÐ»Ñ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ» 'ÐžÑ‚ÐµÐ»Ð¸'.",
    Ð¾Ñ‚ÐµÐ»Ð¸: "Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ñƒ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ 'ÐžÑ‚ÐµÐ»Ð¸', Ð²Ñ‹Ð±Ñ€Ð°Ð² Ð´Ð°Ñ‚Ñ‹ Ð¸ Ð³Ð¾Ñ€Ð¾Ð´.",
    Ð¶Ð¸Ð»ÑŒÐµ: "Ð’ Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ 'ÐžÑ‚ÐµÐ»Ð¸' Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÐµÐµ Ð¶Ð¸Ð»ÑŒÐµ Ð´Ð»Ñ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°.",
    Ð¿Ñ€Ð¸Ð²ÐµÑ‚: "Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ! Ð¯ Ð²Ð°Ñˆ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº. Ð—Ð°Ð´Ð°Ð¹Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¾ ÑÐ°Ð¹Ñ‚Ðµ ðŸ˜Š",
    Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ: "Ð¯ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ð²Ð°Ð¼ Ñ Ð±Ð¸Ð»ÐµÑ‚Ð°Ð¼Ð¸, Ð°Ñ€ÐµÐ½Ð´Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½ Ð¸ Ð³Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ð°Ð¼Ð¸.",
    ÐºÐ°Ðº_Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ: "Ð§Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚, Ð¾Ñ‚ÐµÐ»ÑŒ Ð¸Ð»Ð¸ Ð¼Ð°ÑˆÐ¸Ð½Ñƒ, Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ñ€Ð°Ð·Ð´ÐµÐ».",
    Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹: "ÐšÐ°Ðº Ñ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ð²Ð°Ð¼? Ð¯ Ð¼Ð¾Ð³Ñƒ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¿Ð¾ Ð±Ð¸Ð»ÐµÑ‚Ð°Ð¼, Ð°Ñ€ÐµÐ½Ð´Ðµ Ð¸ Ð¾Ñ‚ÐµÐ»ÑÐ¼.",
  };

  const getBotResponse = (text) => {
    text = text.toLowerCase(); // ÐŸÑ€Ð¸Ð²Ð¾Ð´Ð¸Ð¼ Ñ‚ÐµÐºÑÑ‚ Ðº Ð½Ð¸Ð¶Ð½ÐµÐ¼Ñƒ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñƒ
    for (let key in responses) {
      // Ð˜Ñ‰ÐµÐ¼ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð° Ð² Ñ‚ÐµÐºÑÑ‚Ðµ
      if (text.includes(key)) {
        return responses[key];
      }
    }
    return "Ð˜Ð·Ð²Ð¸Ð½Ð¸Ñ‚Ðµ, Ñ Ð½Ðµ Ð¿Ð¾Ð½ÑÐ» Ð²Ð¾Ð¿Ñ€Ð¾Ñ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÑ„Ð¾Ñ€Ð¼ÑƒÐ»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½Ð°Ñ‡Ðµ.";
  };

  const handleSend = () => {
    if (!input.trim()) return;

    const userMsg = { sender: "user", text: input };
    const botMsg = { sender: "bot", text: getBotResponse(input) };

    setMessages([...messages, userMsg, botMsg]);
    setInput("");
  };

  return (
    <>
      <button className="chat-toggle" onClick={() => setOpen(!open)}>
        {open ? "Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ" : "Ð§Ð°Ñ‚"}
      </button>

      {open && (
        <div className="chatbox">
          <div className="chat-messages">
            {messages.map((msg, index) => (
              <div key={index} className={`msg ${msg.sender}`}>
                {msg.text}
              </div>
            ))}
          </div>
          <div className="chat-input">
            <input
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyDown={(e) => e.key === "Enter" && handleSend()}
              placeholder="ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾Ñ..."
            />
            <button onClick={handleSend}>âž¤</button>
          </div>
        </div>
      )}
    </>
  );
};

export default ChatBot;
